<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="2Q Website Project">
    <meta name="keywords" content="2Q-Project, Website, Projects, Web Development">
    <meta name="authors" content="Isaiah Gael D. Bato, Russell Jayden M. Dayag">
    <title>Frisbee4Fun - Minigames</title>
    <link rel="icon" href="" sizes="32x32" type="image/jpg">
    <link rel="stylesheet" href="../CSS Files/headfoot.css">
    <link rel="stylesheet" href="../CSS Files/minigames.css">
</head>
<body>
<header>
    <div class="top">
        <div class="topimg">
            <img>
        </div>
        <div class="toptitle">
            Frisbee4Fun: Your Guide to Becoming An All Star
        </div>
    </div>
    <div class="nav">
        <ul>
            <li class="head"><a href="../public/pages/minigames.html">Minigames</a></li>
            <li class="head"><a href="../public/pages/stratsandforms.html">Strategies</a></li>
            <li class="head"><a href="../public/pages/ultimatefrisbee.html">Ultimate Frisbee</a></li>
            <li class="head"><a href="../public/pages/tipsntricks.html">Tips and Tricks</a></li>
            <li class="head"><a href="../public/pages/throws.html">Throws</a></li>
            <li class="head"><a href="../public/pages/intro.html">Intro</a></li>
        </ul>
    </div>
</header>

<div id="game-selection">
    <div class="game-box" data-popup="qa-popup">Q&A</div>
    <div class="game-box" data-popup="reaction-popup">Reaction Test</div>
    <div class="game-box" data-popup="loot-popup">Loot Box</div>
</div>

<div class="hover-overlay" id="overlay"></div>

<div class="hover-popup" id="qa-popup">
    <h2>Frisbee Q&A Preview</h2>
    <p>Test your knowledge about frisbee! Answer questions and see how well you know the sport.</p>
</div>

<div class="hover-popup" id="reaction-popup">
    <h2>Reaction Test Preview</h2>
    <p>Catch the flying frisbee as quickly as possible! You have 0.5 seconds after the screen turns green to click the frisbee to catch it!</p>
</div>

<div class="hover-popup" id="loot-popup">
  <h2>Loot Box Preview</h2>
  <p>Spin the loot box to get frisbee items of different rarity.</p>
  <div id="loot-container">
    <div id="loot-carousel">
      <div class="loot-track">
        <div class="loot-item" data-rarity="common"><img src="../public/images/fabric-disc.png" alt="Fabric Disc"></div>
        <div class="loot-item" data-rarity="common"><img src="../public/images/vintage-boots.png" alt="Vintage Boots"></div>
        <div class="loot-item" data-rarity="common"><img src="../public/images/training-jersey.png" alt="Training Jersey"></div>
        <div class="loot-item" data-rarity="uncommon"><img src="../public/images/Kid-disc.png" alt="Kid Disc"></div>
        <div class="loot-item" data-rarity="uncommon"><img src="../public/images/Decathlon-boots.png" alt="Decathlon Boots"></div>
        <div class="loot-item" data-rarity="rare"><img src="../public/images/Disc-golf.png" alt="Disc Golf"></div>
        <div class="loot-item" data-rarity="rare"><img src="../public/images/nivia-boots.png" alt="Nivia Boots"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/Decathlon-disc.png" alt="Decathlon Disc"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/puma-boots.png" alt="Puma Boots"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/minions-jersey.png" alt="Minions Jersey"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/Competition-disc.png" alt="Competition Disc"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/adidas-boots.png" alt="Adidas Boots"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/alianti-jersey.png" alt="Alianti Jersey"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/USA-disc.png" alt="USA Disc"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/nike-boots.png" alt="Nike Boots"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/ph-jersey.png" alt="PH Jersey"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/usa-jersey.png" alt="USA Jersey"></div>

        <!-- repeat all items once more for smooth spin -->
        <div class="loot-item" data-rarity="common"><img src="../public/images/fabric-disc.png" alt="Fabric Disc"></div>
        <div class="loot-item" data-rarity="common"><img src="../public/images/vintage-boots.png" alt="Vintage Boots"></div>
        <div class="loot-item" data-rarity="common"><img src="../public/images/training-jersey.png" alt="Training Jersey"></div>
        <div class="loot-item" data-rarity="uncommon"><img src="../public/images/Kid-disc.png" alt="Kid Disc"></div>
        <div class="loot-item" data-rarity="uncommon"><img src="../public/images/Decathlon-boots.png" alt="Decathlon Boots"></div>
        <div class="loot-item" data-rarity="rare"><img src="../public/images/Disc-golf.png" alt="Disc Golf"></div>
        <div class="loot-item" data-rarity="rare"><img src="../public/images/nivia-boots.png" alt="Nivia Boots"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/Decathlon-disc.png" alt="Decathlon Disc"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/puma-boots.png" alt="Puma Boots"></div>
        <div class="loot-item" data-rarity="epic"><img src="../public/images/minions-jersey.png" alt="Minions Jersey"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/Competition-disc.png" alt="Competition Disc"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/adidas-boots.png" alt="Adidas Boots"></div>
        <div class="loot-item" data-rarity="legendary"><img src="../public/images/alianti-jersey.png" alt="Alianti Jersey"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/USA-disc.png" alt="USA Disc"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/nike-boots.png" alt="Nike Boots"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/ph-jersey.png" alt="PH Jersey"></div>
        <div class="loot-item" data-rarity="mythical"><img src="../public/images/usa-jersey.png" alt="USA Jersey"></div>
      </div>
    </div>
    <div id="loot-line"></div>
    <div id="loot-result"></div>
    <button id="loot-spin">Open Loot Box</button>
  </div>
</div>


<footer>
    <div class="footer">
        <div class="copyright">Copyright</div>
        <div class="ig"><a href="">Isaiah's Instagram</a><br><a href="">Russell's Instagram</a></div>
        <div class="fb"><a href="">Isaiah's Facebook</a><br><a href="">Russell's Facebook</a></div>
        <div class="frisbee"><a href="">Frisbee Site</a></div>
        <div class="email"><a href="">Isaiah's email</a><br><a href="">Russell's email</a></div>
        <div class="references"><a href="../pages/references.html">References</a></div>
    </div>
</footer>

<script>
const overlay = document.getElementById('overlay');
const spinBtn = document.getElementById("loot-spin");
const track = document.querySelector(".loot-track");
const carousel = document.getElementById("loot-carousel");
const result = document.getElementById("loot-result");
let scrollX = 0;
let idleAnim = null;
let isSpinning = false;

function startIdleScroll() {
    function idle() {
        if (!isSpinning) {
            scrollX -= 1;
            const width = track.scrollWidth / 2;
            if (Math.abs(scrollX) >= width) scrollX = 0;
            track.style.transform = `translateX(${scrollX}px)`;
        }
        idleAnim = requestAnimationFrame(idle);
    }
    if (!idleAnim) idle();
}

function stopIdleScroll() {
    if (idleAnim) cancelAnimationFrame(idleAnim);
    idleAnim = null;
}

document.querySelectorAll('.game-box').forEach(box => {
    box.onclick = () => {
        const popup = document.getElementById(box.dataset.popup);
        popup.style.display = 'flex';
        overlay.style.display = 'block';
    }
});
overlay.onclick = () => {
    document.querySelectorAll('.hover-popup').forEach(popup => popup.style.display = 'none');
    overlay.style.display = 'none';
};

spinBtn.addEventListener("click", () => {
  if (isSpinning) return;
  isSpinning = true;
  spinBtn.disabled = true;

  const items = document.querySelectorAll(".loot-item");
  const result = document.getElementById('loot-result');
  result.textContent = '';
  result.className = '';

  const itemWidth = items[0].offsetWidth + 24;
  const winIndex = Math.floor(Math.random() * items.length);
  const centerOffset = (carousel.offsetWidth / 2) - (itemWidth / 2);
  const finalX = -(winIndex * itemWidth) + centerOffset;

  track.classList.remove('idle'); 

  track.style.transition = "transform 3s cubic-bezier(0.15, 0.8, 0.2, 1)";
  track.style.transform = `translateX(${finalX}px)`;

  track.addEventListener('transitionend', function onTransitionEnd() {
    track.style.transition = "none";
    track.classList.add('idle'); 
    isSpinning = false;
    spinBtn.disabled = false;

    const winningItem = items[winIndex];
    const rarity = winningItem.dataset.rarity;
    const imgAlt = winningItem.querySelector('img').alt;
    result.textContent = `You won: ${imgAlt} (${rarity})`;
    result.className = rarity;

    track.removeEventListener('transitionend', onTransitionEnd);
  });
});

</script>
</body>
</html>
